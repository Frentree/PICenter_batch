<?xml version="1.0" encoding="EUC-KR"?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"  "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="query">
	<!--  -->
	<select id="getAgentIp" resultClass="com.skyun.app.util.database.ibatis.vo.agentIpVo">
		SELECT A.AGENT_CONNECTED_IP AS IP, T.TARGET_ID, T.AP_NO, IFNULL(T.NET_ID, -1) AS NET_ID
		FROM pi_targets T,pi_agents A 
		WHERE 1=1
		 AND A.AGENT_CONNECTED_IP IS NOT NULL
		 AND T.AP_NO != 0
		 AND T.NAME = A.AGENT_NAME
		 AND T.AP_NO = A.AP_NO
	</select>
	
	<select id="getNetIp" resultClass="com.skyun.app.util.database.ibatis.vo.netIpVo">
		SELECT NI.TYPE, NI.IP, NI.MASK,
		 CONCAT(NI.IP ,'/', NI.MASK) AS MASK_IP
		FROM skt_net_ip NI
		ORDER BY CAST(NI.MASK AS SIGNED) DESC, NI.IP
	</select>

	<select id="getAgentList" resultClass="int">
		SELECT NS.NET_ID
		FROM skt_net_schedule NS
		WHERE NS.NET_TYPE = 0
		 AND NS.NET_TYPE_ID = #net_type_id#
	</select>

</sqlMap>
